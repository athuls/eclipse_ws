<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SenStore: buildtools::dbdef Namespace Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="namespaces.html"><span>Namespace&nbsp;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>buildtools</b>::<a class="el" href="namespacebuildtools_1_1dbdef.html">dbdef</a>
  </div>
</div>
<div class="contents">
<h1>buildtools::dbdef Namespace Reference</h1>This package provides a tool for converting a database definition (using the domain specific database definition language) to an in-memory variable definition tree.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_vars.html">Vars</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dictionary class for holding variables.  <a href="classbuildtools_1_1dbdef_1_1_vars.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_database_vars.html">DatabaseVars</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Variable data set for the storing database definition.  <a href="classbuildtools_1_1dbdef_1_1_database_vars.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_syntax_object.html">SyntaxObject</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Abstract base class for a syntax object.  <a href="classbuildtools_1_1dbdef_1_1_syntax_object.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_comment.html">Comment</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classbuildtools_1_1dbdef_1_1_comment.html" title="Comment syntax element object class.">Comment</a> syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_comment.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_doc_string.html">DocString</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Document string syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_doc_string.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_enum_name.html">EnumName</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enumeration name syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_enum_name.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_class_name.html">ClassName</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Class name syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_class_name.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_base_class_name.html">BaseClassName</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Base class name syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_base_class_name.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_tag_name.html">TagName</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tag name syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_tag_name.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_var_name.html">VarName</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Variable name syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_var_name.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_ref_name.html">RefName</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Object reference name syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_ref_name.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_type_name.html">TypeName</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Variable or reference type syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_type_name.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_var_def.html">VarDef</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Variable definition syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_var_def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_ref_def.html">RefDef</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Object reference definition syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_ref_def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_class_def.html">ClassDef</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Class definition syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_class_def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_enum_elem.html">EnumElem</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enumeration element definition syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_enum_elem.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_enum_def.html">EnumDef</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enumeration definition syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_enum_def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_array_def.html">ArrayDef</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Array definition syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_array_def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbuildtools_1_1dbdef_1_1_signal_def.html">SignalDef</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Signal definition syntax element object class.  <a href="classbuildtools_1_1dbdef_1_1_signal_def.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebuildtools_1_1dbdef.html#1d628ec53bd7b85791cf13a41790c8e9">getSyntax</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds the Database-definition language syntax.  <a href="#1d628ec53bd7b85791cf13a41790c8e9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebuildtools_1_1dbdef.html#a1b98586a598a0ff458d3d81e79a0ec1">process</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parses the database definition and returns the corresponding variable tree definition.  <a href="#a1b98586a598a0ff458d3d81e79a0ec1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebuildtools_1_1dbdef.html#3bfb519a9c05ece614db4f6e6c32be2e">read</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parses the variable definition file and adds internal variables.  <a href="#3bfb519a9c05ece614db4f6e6c32be2e"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="16c539d2b8ebfd108014255c001050af"></a><!-- doxytag: member="buildtools::dbdef::_syntax" ref="16c539d2b8ebfd108014255c001050af" args="" -->
tuple&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebuildtools_1_1dbdef.html#16c539d2b8ebfd108014255c001050af">_syntax</a> = getSyntax()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pre-build syntax. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This package provides a tool for converting a database definition (using the domain specific database definition language) to an in-memory variable definition tree. 
<p>
The database definition language resembles C++, and allows the definition of enumerations and classes. <b>Enumerations</b> allow the definition of database fields that have a predefined number of options. The documentation strings (inspired by JavaDoc / Doxygen) are scanned as well, and can be used in the template.<p>
<div class="fragment"><pre class="fragment">
 enum SomeName {
  /** Documentation string goes here. */
  LABEL1,
  /** Documentation string goes here. */
  LABEL2
 };</pre></div><p>
<b>Classes</b> allow the definition of objects that contain variables and references to other objects.<p>
<div class="fragment"><pre class="fragment">
 /** Some base class. */
 class SomeBaseClass {
   /** Some integer variable (to be stored in HDF5). */
   @hdf int32 count;
 };

 /** Some derived class. */
 class SomeClass(SomeBaseClass) {
   /** Some string variable. */
   string name;
 };

 /** Some other class. */
 class SomeOtherClass {
   /** A link to an object of another class. */
   SomeClass *buddy;
 };</pre></div><p>
The database code generation will automatically add an id variable to each base class, and use that in uniquely identifying an object (a primary key in SQL), and to link to other objects (a foreign key in SQL). The variable types can be anything in theory, but must be supported by the template and any type mapping function. Reference variables are set as <code>'class' = 'ref'</code>, and normal variable as <code>'class' = 'var'</code>, which can be used in the template to differentiate between them. Members can be tagged to indicate where they will be stored. Currently all regular fields are stored in the SQL database by default, unless they are tagged by '@hdf', in which case they are stored in HDF5.<p>
<b>Arrays</b> allow the definition of multi-dimensional arrays that map variables, <em>e.g.</em> the force-to-displacement mapping (elasticity). The array data itself is stored in HDF5.<p>
<div class="fragment"><pre class="fragment">
 /** Linear mapping between two node-related quantities. */
 array NodeMapping(float64) {
   /** Parent structure */
   Structure *struct;
   /** Short name */
   string name;
   /** Description */
   string description;
   /** Output quantity */
   Quantity *outputQuantity;
   /** Input quantity */
   Quantity *inputQuantity;
   axes {
     /** Output node */
     Node *outputNode;
     /** Input node */
     Node *inputNode;
   };
 };</pre></div><p>
<b>Signals</b> allow the definition of multi-dimensional arrays with an additional time dimension, <em>e.g.</em> strain measurements over time. The signal data itself is stored in HDF5.<p>
<div class="fragment"><pre class="fragment">
 /** Strain sensor readings. */
 signal StrainMeasurement(float32) {
   /** Parent structure */
   Structure *struct;
   /** Short name */
   string name;
   /** Description */
   string description;
   /** Output quantity */
   axes {
     /** Sensor. */
     Sensor *sensor;
   };
 };</pre></div> 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="1d628ec53bd7b85791cf13a41790c8e9"></a><!-- doxytag: member="buildtools::dbdef::getSyntax" ref="1d628ec53bd7b85791cf13a41790c8e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def buildtools::dbdef::getSyntax           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds the Database-definition language syntax. 
<p>

</div>
</div><p>
<a class="anchor" name="a1b98586a598a0ff458d3d81e79a0ec1"></a><!-- doxytag: member="buildtools::dbdef::process" ref="a1b98586a598a0ff458d3d81e79a0ec1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def buildtools::dbdef::process           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>dbdFilename</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses the database definition and returns the corresponding variable tree definition. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dbdFilename</em>&nbsp;</td><td>database file name (input) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>variable tree definition </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classbuildtools_1_1dbdef_1_1_vars.html" title="Dictionary class for holding variables.">Vars</a> <p>
<a class="el" href="namespacebuildtools_1_1dbdef.html#3bfb519a9c05ece614db4f6e6c32be2e" title="Parses the variable definition file and adds internal variables.">read()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="3bfb519a9c05ece614db4f6e6c32be2e"></a><!-- doxytag: member="buildtools::dbdef::read" ref="3bfb519a9c05ece614db4f6e6c32be2e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def buildtools::dbdef::read           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>defFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>basename</em> = <code>'SenStore'</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses the variable definition file and adds internal variables. 
<p>
The resulting variable definition contains all the database variables and code generatation variables. The variable definition is a tree of Python Vars() objects and Python lists. The Vars() objects act like dictionaries, with added functionality of accessing keys as members: <code>vars.enumDefs</code> is a short-hand for <code>vars['enumDefs']</code>. For example, looping over all enumeration definitions can be done as follows:<p>
<div class="fragment"><pre class="fragment">
 for enumDef in vars.enumDefs:
   print enumDef.sqlName
   for member in enumDef.members:
      print '  ' + member.name</pre></div><p>
The variable definition contains, among others, the following data:<p>
Database definition lists:<ul>
<li><code>vars.enumDefs:</code> list of database enumerations</li><li><code>vars.classDefs:</code> list of database classes</li><li><code>vars.arrayDefs:</code> list of database arrays</li><li><code>vars.signalDefs:</code> list of database signals</li></ul>
<p>
Names of generated Python packages:<ul>
<li><code>vars.hdf5PyPackage:</code> HDF5 database access</li><li><code>vars.pgdbPyPackage:</code> PostgreSQL database access</li><li><code>vars.icePyPackage:</code> ZeroC Ice database interface</li><li><code>vars.serverPyPackage:</code> Transparent access to HDF5 and PostgreSQL databases</li><li><code>vars.clientPyPackage:</code> Utility functions to connect to database</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>defFile</em>&nbsp;</td><td>variable definition file name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>basename</em>&nbsp;</td><td>base name of database (Capitalized) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>variable definition </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="namespacebuildtools_1_1dbdef.html#a1b98586a598a0ff458d3d81e79a0ec1" title="Parses the database definition and returns the corresponding variable tree definition...">process()</a> </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jun 18 17:24:57 2010 for SenStore by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
